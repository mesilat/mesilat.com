<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Confluence Fields plugin for Atlassian JIRA - Mesilat Limited Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="44696055">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">PUB</span>
                    <img class="space-logo" src="PUB.png" />
                </h1>
                <a href="44696055.html" class="ht-space-link">
                    <h2>Mesilat Limited Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=44696004"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="44696055.html">Mesilat Limited Documentation</a></li>
                                                            </ul>
</div>            <h1 id="src-44696004"> <span>Confluence Fields plugin for Atlassian JIRA</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<p   
>Please watch <a  class="external-link" href="https://youtu.be/tKcF8_oVwlg">introduction video</a> to see what this addon can do for you.</p>
<p   
>Every <strong class=" ">Confluence Field</strong> custom field that you create in your JIRA application should be configured. Below is a sample configuration dialog screenshot:</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696004/configuration.png" alt="images/wiki/download/attachments/44696004/configuration.png"   />
        <br/><span class="caption">Configuration Dialog</span>
    <ul class=" "><li class=" "><p   
>Confluence</p>
</li></ul><p   
>In case that your JIRA is linked to multiple Confluence instances you may use the <strong class=" ">Confluence</strong> field to specify the instance that you want to provide data for your custom field. By default it will use the <i class=" ">primary</i> Confluence instance.</p>
<ul class=" "><li class=" "><p   
>Filter</p>
</li></ul><p   
>You may specify CQL (<a  class="external-link" href="https://developer.atlassian.com/server/confluence/advanced-searching-using-cql/">Confluence Query Language</a>) clause to filter Confluence pages according to your requirements. The clause will be applied to every query that your JIRA executes. For example, if you set your field&rsquo;s filter value to <strong class=" ">space=&rdquo;DS&rdquo; and label=&rdquo;client&rdquo;</strong> and type <strong class=" ">mesilat</strong> while editing the custom field, than the resulting CQL-query will be <strong class=" ">type=&rdquo;page&rdquo; and title~&rdquo;mesilat&rdquo; and space=&rdquo;DS&rdquo; and label=&rdquo;client&rdquo;</strong>. The field&rsquo;s dropdown control will list only those Confluence pages that match this query.</p>
<ul class=" "><li class=" "><p   
>Test</p>
</li></ul><p   
>Use this field to test your Confluence connection and your CQL-filter validity. If your JIRA is authorized to call the Confluence instance&rsquo;s API and your filter is valid than you will get a list of Confluence pages that match your query. The test field behaves exactly the same way as your custom field when you edit a JIRA issue.</p>
<p   
>If your JIRA is not authorized by Confluence than you will get an error:To fix the error please follow the link provided in the message to start the OpenID &ldquo;dance&rdquo; and authorize your JIRA. It should be noted that authorization is individual for every JIRA user.</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696004/authorization-error.png" alt="images/wiki/download/attachments/44696004/authorization-error.png"   />
        <br/><span class="caption">Authorization Error</span>
    <p   
>If your filter CQL is invalid you will get a syntax error:Refer to Confluence documentation (or use the link provided above) to fix the error.</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696004/syntax-error.png" alt="images/wiki/download/attachments/44696004/syntax-error.png"   />
        <br/><span class="caption">CQL Syntax Error</span>
    <p   
>Substitution Variables</p>
<p   
>It is possible to reference other fields in your JIRA issue in your CQL filter. The addon currently supports referencing text fields and selects. To reference a text field you would use a substitution variable, for example <tt class=" ">${customfield_10000}</tt> where <strong class=" ">customfield_10000</strong> is JIRA identifier of your text field.</p>
<p   
>To reference a select field value you would use a <strong class=" ">.value</strong> suffix to your substuitution variable, for example <tt class=" ">${customfield_10000.value}</tt>.</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696004/configuration-2.png" alt="images/wiki/download/attachments/44696004/configuration-2.png"   />
        <br/><span class="caption">Configuration Dialog</span>
    <p   
>Testing your CQL filter that uses substitution variables will not work but you may temporarily replace the variables with constant values and revert when you are done.</p>
<p   
>Other useful substitution variables are <tt class=" ">${id}</tt> for issue id and <tt class=" ">${key}</tt> for issue key, as well as project-related variables <tt class=" ">${project.key}</tt>, <tt class=" ">${project.name}</tt>, <tt class=" ">${project.projectTypeKey}</tt> and <tt class=" ">${project.projectCategory.name}</tt>. You may find more substitution variables by browsing JIRA API at <tt class=" ">&lt;jira home&gt;/plugins/servlet/restbrowser#/resource/api-2-issue-issueidorkey</tt> (you may need to install <a  class="external-link" href="https://marketplace.atlassian.com/apps/1211542/atlassian-rest-api-browser">REST API Browser</a> plugin).</p>
<ul class=" "><li class=" "><p   
>Select Multi</p>
</li></ul><p   
>By default Confluence field will take multiple values (multi-select). You may choose to restrict it to just one value by unchecking this checkbox.</p>
<ul class=" "><li class=" "><p   
>Auto Filter</p>
</li></ul><p   
>Auto filter option is only meaningful when you use substitution variables referencing other issue fields. If this option is checked and the field you reference in your substitution variable changes value, then your Confluence field will be automatically tested against resulting CQL. If the fields&rsquo; value does not match the CQL, then the field will be automatically cleared. If the field is a multi-select, then values that do not match the CQL will be removed, while values that do match will be preserved.</p>
<ul class=" "><li class=" "><p   
>As Definer</p>
</li></ul><p   
>By default JIRA will query Confluence using current user&rsquo;s credentials. In some cases (such as JSD Customer Portal) it is desirable to use the administrator&rsquo;s credentials instead. Check this checkbox to enable JIRA to query Confluence using the custom field definer&rsquo;s credentials.</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696004/configuration-3.png" alt="images/wiki/download/attachments/44696004/configuration-3.png"   />
        <br/><span class="caption">Configuration Dialog</span>
    <ul class=" "><li class=" "><p   
>Project-Specific Settings</p>
</li></ul><p   
>You may want to override global Confluence field settings with project-specific settings. To define project-specific settings for a Confluence field please navigate to JIRA project settings page, select <tt class=" ">Fields</tt> then click <tt class=" ">Configure Confluence field</tt> link.</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696004/configuration-4.png" alt="images/wiki/download/attachments/44696004/configuration-4.png"   />
        <br/><span class="caption">Configuration Link</span>
            </div>

    </article>


            <nav id="ht-post-nav">
                <a href="44696023.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Comment History Plugin</span>
        </a>
                <a href="44696003.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Weekly Activity Gadget</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
