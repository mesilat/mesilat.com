<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Zabbix Plugin - Mesilat Limited Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="44696055">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">PUB</span>
                    <img class="space-logo" src="PUB.png" />
                </h1>
                <a href="44696055.html" class="ht-space-link">
                    <h2>Mesilat Limited Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=44696008"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="44696055.html">Mesilat Limited Documentation</a></li>
                                                            </ul>
</div>            <h1 id="src-44696008"> <span>Zabbix Plugin</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

<p   
>There are many of us sysadmins out there who use Confluence as primary source of information about managed systems&rsquo; hardware and software &ndash; the type of information that would likely contain installation instructions, configuration files, performance reports and other valuable bits and pieces of information. This is usually accompanied by network monitoring tools such as Zabbix.</p>
<p   
>This plugin is used to add <strong class=" ">Zabbix Graphs</strong> and <strong class=" ">Zabbix Maps</strong> to your Confluence pages to supplement configuration details and reports with online graphical information. It is also possible to import text information such as <strong class=" ">Zabbix Items</strong> and <strong class=" ">Zabbix Triggers</strong>.</p>
    <div class="section section-1" id="src-44696008_ZabbixPlugin-Setup">
        <h1 class="heading "><span>Setup</span></h1>
<p   
>Before using the plugin you have to provide Zabbix server connection details to your Confluence instance.</p>
<ol class=" "><li class=" "><p   
>Using Zabbix administration pages, create &ldquo;confluence&rdquo; account in &ldquo;confluence&rdquo; user group and grant the group read-only permissions to whatever hosts you choose to be available in your Confluence instance.</p>
</li></ol><p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/ZabbixUser.png" alt="images/wiki/download/attachments/44696008/ZabbixUser.png"   />
        <br/><span class="caption">Confluence user</span>
    </p>
<ol class=" "><li class=" "><p   
>In Confluence, install the plugin and navigate to configuration screen by pressing <strong class=" ">Configure</strong> button.</p>
</li></ol><p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/ConfigureButton.png" alt="images/wiki/download/attachments/44696008/ConfigureButton.png"   />
        <br/><span class="caption">Configure button</span>
    </p>
<p   
>Create a new Zabbix server connection by providing Zabbix server address and credentials.</p>
<p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/NewConnection.png" alt="images/wiki/download/attachments/44696008/NewConnection.png"   />
        <br/><span class="caption">Configuration screen</span>
    </p>
<p   
>You may share your connection descriptor with other Confluence users by selecting a user or a user group in <strong class=" ">Grantees</strong> field.</p>
<p   
>You may also set the connection as <strong class=" ">Default</strong>. <i class=" ">This option is maintained for compatibility only</i>.</p>
    </div>
    <div class="section section-1" id="src-44696008_ZabbixPlugin-ZabbixGraphmacro">
        <h1 class="heading "><span>Zabbix Graph macro</span></h1>
<p   
>Drop <strong class=" ">Zabbix Graph</strong> macro on a page and specify <strong class=" ">Server</strong>, <strong class=" ">Host</strong> and <strong class=" ">Graph</strong> parameters. You may also set the <strong class=" ">Period</strong> (in seconds), <strong class=" ">Width</strong> and <strong class=" ">Height</strong> of the graph in pixels.</p>
<p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/GraphMacro.png" alt="images/wiki/download/attachments/44696008/GraphMacro.png"   />
        <br/><span class="caption">Graph Macro</span>
    </p>
<p   
>Save the page and you will see the selected Zabbix graph:</p>
<p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/GraphMacro2.png" alt="images/wiki/download/attachments/44696008/GraphMacro2.png"   />
        <br/><span class="caption">Graph Macro</span>
    </p>
<p   
>You can put as many Zabbix graphs on a Confluence page as you need.</p>
    <div class="section section-2" id="src-44696008_ZabbixPlugin-Anonymoususeraccess">
        <h2 class="heading "><span>Anonymous user access</span></h2>
<p   
>You may wish to make your Confluence pages public as described in Confluence server <a  class="external-link" href="https://confluence.atlassian.com/doc/setting-up-public-access-156.html">documentation</a>. However the plugin will not share Zabbix data with unauthenticated users. Starting with version 1.1.35 of the plugin you can setup anonymous user access to Zabbix Graph Macro as follows:</p>
<ul class=" "><li class=" "><p   
>create a Confluence user <strong class=" ">zabbix-anonymous</strong></p>
</li><li class=" "><p   
>navigate to the plugin configuration page (use the plugin Configure button) and edit your Zabbix server <i class=" ">grantees</i> to include the user <strong class=" ">zabbix-anonymous</strong>.</p>
</li><li class=" "><p   
>as a final step &ndash; disable <strong class=" ">zabbix-anonymous</strong> user</p>
</li></ul><p   
>You should end up with something like</p>
<p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/Screenshot_2021-02-19_at_22.55.53.png" alt="images/wiki/download/attachments/44696008/Screenshot_2021-02-19_at_22.55.53.png"   />
    </p>
    </div>
    </div>
    <div class="section section-1" id="src-44696008_ZabbixPlugin-ZabbixItemmacro">
        <h1 class="heading "><span>Zabbix Item macro</span></h1>
<p   
>In Zabbix an &lsquo;item&rsquo; is an individual metric that gathers data from a monitored host.</p>
<p   
>Drop <strong class=" ">Zabbix Item</strong> macro on page and specify <strong class=" ">Server</strong>, <strong class=" ">Host</strong> and <strong class=" ">Item</strong> parameters.</p>
<p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/ItemMacro.png" alt="images/wiki/download/attachments/44696008/ItemMacro.png"   />
        <br/><span class="caption">Item Macro</span>
    </p>
<p   
>Save the page and you will see the item details:</p>
<p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/ItemMacro2.png" alt="images/wiki/download/attachments/44696008/ItemMacro2.png"   />
        <br/><span class="caption">Item Macro</span>
    </p>
<p   
>It is possible to modify the item format. <strong class=" ">Zabbix Plugin</strong> comes with three predefined named formats:</p>
<ul class=" "><li class=" "><p   
><strong class=" ">default</strong> or <strong class=" ">long</strong>: icon, item name and key, value, units and value date/time</p>
</li><li class=" "><p   
><strong class=" ">medium</strong>: item value and date/time</p>
</li><li class=" "><p   
><strong class=" ">short</strong>: item value only</p>
</li></ul><p   
>You can create custom named formats using the plugin configuration page:</p>
<p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/ItemFormat.png" alt="images/wiki/download/attachments/44696008/ItemFormat.png"   />
        <br/><span class="caption">Item Formats</span>
    </p>
<p   
>Item format components are defined as follows:</p>
<ul class=" "><li class=" "><p   
><strong class=" ">v</strong>: latest item value</p>
</li><li class=" "><p   
><strong class=" ">c</strong>: latest item clock (date and time)</p>
</li><li class=" "><p   
><strong class=" ">n</strong>: item name</p>
</li><li class=" "><p   
><strong class=" ">k</strong>: item key</p>
</li><li class=" "><p   
><strong class=" ">d</strong>: item description (as defined by Zabbix server)</p>
</li><li class=" "><p   
><strong class=" ">u</strong>: item units</p>
</li><li class=" "><p   
><strong class=" ">i</strong>: item id (as defined by Zabbix server)</p>
</li><li class=" "><p   
><strong class=" ">z</strong>: item icon (red letter &ldquo;Z&rdquo;)</p>
</li></ul><p   
>You may also include arbitrary text in single or double quotes.</p>
    </div>
    <div class="section section-1" id="src-44696008_ZabbixPlugin-ZabbixTriggersmacro">
        <h1 class="heading "><span>Zabbix Triggers macro</span></h1>
<p   
>In Zabbix a &lsquo;trigger&rsquo; is defined as a logical expression and represents system state. Typically when a trigger signals a problem an action is required from a system administrator.</p>
<p   
>To list active triggers for a host drop <strong class=" ">Zabbix Triggers</strong> macro on your page and specify <strong class=" ">Server</strong> and <strong class=" ">Host</strong> parameters.</p>
<p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/TriggersMacro.png" alt="images/wiki/download/attachments/44696008/TriggersMacro.png"   />
        <br/><span class="caption">Triggers Macro</span>
    </p>
<p   
>Save the page and you will see active triggers for the host:</p>
<p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/TriggersMacro2.png" alt="images/wiki/download/attachments/44696008/TriggersMacro2.png"   />
        <br/><span class="caption">Triggers Macro</span>
    </p>
<p   
>In case there are no active triggers to display:</p>
<p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/TriggersMacro3.png" alt="images/wiki/download/attachments/44696008/TriggersMacro3.png"   />
        <br/><span class="caption">Triggers Macro</span>
    </p>
    </div>
    <div class="section section-1" id="src-44696008_ZabbixPlugin-ZabbixMapmacro">
        <h1 class="heading "><span>Zabbix Map macro</span></h1>
<p   
>In Zabbix you can create a &lsquo;map&rsquo; with one or more hosts.</p>
<p   
>To get your Zabbix map in Confluence drop <strong class=" ">Zabbix Map</strong> macro on page and specify the <strong class=" ">Server</strong> and <strong class=" ">Map</strong> parameters.</p>
<p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/MapMacro.png" alt="images/wiki/download/attachments/44696008/MapMacro.png"   />
        <br/><span class="caption">Map Macro</span>
    </p>
<p   
>Save the page and you will have your Zabbix map on it.</p>
    </div>
    <div class="section section-1" id="src-44696008_ZabbixPlugin-HostSelectormacro">
        <h1 class="heading "><span>Host Selector macro</span></h1>
<p   
>Suppose you have a report page template that you would like to apply to multiple Zabbix hosts. Instead of duplicating a page and updating host details in each and every graph / item on the page you can use a <strong class=" ">Host Selector</strong> macro to share server / host parameter values with other zabbix- macros.</p>
<p   
>Drop <strong class=" ">Host Selector</strong> macro on a page and specify the <strong class=" ">Server</strong> and <strong class=" ">Host</strong> parameters.</p>
<p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/HostSelectorMacro.png" alt="images/wiki/download/attachments/44696008/HostSelectorMacro.png"   />
        <br/><span class="caption">Host Selector Macro</span>
    </p>
<p   
>When you save the page the macro will print the selected Zabbix host name:</p>
<p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/HostSelectorMacro2.png" alt="images/wiki/download/attachments/44696008/HostSelectorMacro2.png"   />
        <br/><span class="caption">Host Selector Macro</span>
    </p>
<p   
>Now you can use <strong class=" ">Zabbix Graph</strong> or <strong class=" ">Zabbix Item</strong> macros without specifying a server or host:</p>
<p   
><img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696008/HostSelectorMacro3.png" alt="images/wiki/download/attachments/44696008/HostSelectorMacro3.png"   />
        <br/><span class="caption">Host Selector Macro</span>
    </p>
<hr>
<p   
>This plugin is <a  class="external-link" href="https://marketplace.atlassian.com/apps/1215171/zabbix-plugin?hosting=server&amp;tab=overview">available for download</a> from Atlassian Marketplace.</p>
<p   
>The plugin can be used in Atlassian Data Center environment.</p>
<p   
>To report a bug please use the <a  class="external-link" href="https://github.com/mesilat/zabbix-plugin/issues">issue tracker</a>.</p>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="44696006.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Restricted Content Plugin</span>
        </a>
                <a href="44696023.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Comment History Plugin</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
