<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Oracle HTP Plugin for Atlassian Confluence - Mesilat Limited Documentation</title>

    
    <link rel="stylesheet" href="assets/css/expand-macro.css">

            <meta name="scroll-content-language-key" content="">
    
    <meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0, user-scalable=yes">

<script type="text/javascript" src="assets/js/jquery.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.scrollTo.min.js"></script>


<script type="text/javascript" src="assets/js/translate.js"></script>


<script type="text/javascript" src="assets/js/scroll-tree.js"></script>

<script type="text/javascript" src="assets/js/theme.main.js"></script>

    <script type="text/javascript" src="assets/js/iframeResizer.min.js"></script>

<link rel="stylesheet" href="assets/css/content-style.css">
    <link rel="stylesheet" href="assets/css/search.css">

<link rel="stylesheet" href="assets/css/theme.main.css">
<link rel="stylesheet" href="assets/css/theme.colors.css">

            <!-- ES5 support for older browsers, needed by lunr -->
        <script src="js/augment.js"></script>
        <script id="worker" type="javascript/worker">

        startIndex = function() {
            idx = lunr.Index.load(lunrIndex);
            idx.pipeline.remove(lunr.stopWordFilter);
            postMessage({type: "setup-complete"});
        }

        onmessage = function (event) {
            var message = event.data;

            if ((message.type === 'setup') && message.baseUrl) {
                var url = message.baseUrl;
                importScripts(url + 'js/lunr.js');
                importScripts(url + 'js/lunr-extras.js');
                importScripts(url + 'js/lunr-index.js');
                importScripts(url + 'js/lunr-data.js');
                startIndex();
            }

            if (idx && (message.type === 'search-request') && message.query) {
                var searchWord = message.query;
                var results = idx.search(searchWord).map(function (result) {
                    return lunrData.filter(function (d) {
                        return d.id === parseInt(result.ref, 10)
                    })[0]
                });
                postMessage({type: 'search-results', results: results, query: searchWord, queryId: message.queryId});
            }
        }

    </script>
    </head>

<body pageid="44696055">

<div id="ht-loader">
    <noscript>
        <p style="width: 100%; text-align:center; position: absolute; margin-top: 200px;">This content cannot be displayed without JavaScript.<br>Please enable JavaScript and reload the page.</p>
    </noscript>
</div>

<div>
   	<header id="ht-headerbar">
    <div class="ht-headerbar-left">
        <a href="" id="ht-menu-toggle" class="sp-aui-icon-small sp-aui-iconfont-appswitcher"></a>
    </div>
    <div class="ht-headerbar-right">
            <div class="sp-aui-icon-small ht-search-index-loader ht-header-icon"></div>

        <div id="ht-search">
            <div class="ht-search-input" style="display: none;">
              	<a href="#" class="sp-aui-icon-small sp-aui-iconfont-remove ht-search-clear"></a>

                <form action="#" method="GET" id="search">
                    <input class="search-input" type="text" placeholder="Search" tabindex="-1" autocomplete="off" name="q" value="">
                    <input type="hidden" name="max" value="15" />
                    <input type="submit" style="display:none" tabindex="-4"/>
                </form>

                <a href="#" id="ht-search-button" class="ht-header-icon ht-header-icon-svg">
                                        <svg width="40px" height="40px" viewBox="0 0 40 40" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
                        <g>
                            <path d="M29.572,28.802 L28.801,29.571 C28.515,29.857 28.187,30 27.816,30 C27.445,30 27.116,29.857 26.831,29.571 L21.392,24.134 C20.193,24.762 18.908,25.076 17.538,25.076 C15.396,25.076 13.605,24.348 12.163,22.892 C10.721,21.436 10,19.651 10,17.538 C10,15.397 10.721,13.605 12.163,12.163 C13.605,10.721 15.396,10 17.538,10 C19.651,10 21.434,10.721 22.89,12.163 C24.347,13.605 25.075,15.397 25.075,17.538 C25.075,18.937 24.761,20.222 24.132,21.393 L29.572,26.832 C29.857,27.118 30,27.446 30,27.817 C30,28.188 29.857,28.517 29.572,28.802 L29.572,28.802 Z M13.662,21.414 C14.732,22.485 16.024,23.02 17.538,23.02 C19.051,23.02 20.343,22.485 21.413,21.414 C22.484,20.344 23.019,19.052 23.019,17.538 C23.019,16.025 22.484,14.733 21.413,13.662 C20.343,12.592 19.051,12.056 17.538,12.056 C16.024,12.056 14.732,12.592 13.662,13.662 C12.591,14.733 12.056,16.025 12.056,17.538 C12.056,19.052 12.591,20.344 13.662,21.414 L13.662,21.414 Z"></path>
                        </g>
                    </svg>
              	</a>

                <div class="ht-search-dropdown ht-dropdown">
                    <ul></ul>
                </div>
            </div>
        </div>
    </div>
    </header>   	<aside id="ht-sidebar">
    <div class="ht-sidebar-content">
        <div class="ht-sidebar-content-scroll-container">
            <header class="ht-sidebar-header">
                <h1 class="ht-logo">
                    <span class="ht-logo-label">PUB</span>
                    <img class="space-logo" src="PUB.png" />
                </h1>
                <a href="44696055.html" class="ht-space-link">
                    <h2>Mesilat Limited Documentation</h2>
                </a>
            </header>
                            <iframe id="ht-nav" src="toc.html?pageId=44696017"></iframe>
                <script>
                    $('iframe#ht-nav').iFrameResize(
                            { 'log': true, 'autoResize': true, 'heightCalculationMethod': 'lowestElement', 'checkOrigin': false });
                </script>
                    </div>
    </div>

</aside></div>

<div id="ht-wrap-container">

            
    <div id="ht-sidebar-dragbar">
    <div class="ht-sidebar-drag-handle">
        <span class="drag-handle-1"></span>
        <span class="drag-handle-2"></span>
        <span class="drag-handle-3"></span>
    </div>
</div>
    <article id="ht-content" class="ht-content">
        <header class="ht-content-header">
            <div id="ht-breadcrumb">
    <ul>
        <li><a href="44696055.html">Mesilat Limited Documentation</a></li>
                                                            </ul>
</div>            <h1 id="src-44696017"> <span>Oracle HTP Plugin for Atlassian Confluence</span></h1>
        </header>

        <div id="main-content" class="wiki-content sp-grid-section" data-index-for-search="true">

    <div  class="confbox admonition admonition-note">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>This plugin is not supported. Please note that this documentation is obsolete at parts. Please refer to <a  class="external-link" href="https://github.com/mesilat/oracle-htp-plugin">source code</a> if in doubt</p>
        </div>
    </div>
<p   
>Use this plugin as a web gateway for your Oracle database. You can use it to execute stored procedures, run queries and build reports.</p>
<p   
>Oracle HTP Macro takes its name from Oracle HTP package, which is commonly used to generate HTML pages and other web content in Oracle database. This content is then delivered to a client via Oracle HTTP Server that is connected to Oracle database by means of data access descriptor (DAD). Oracle HTP Macro for Confluence allows publishing HTML, generated by Oracle, in your Confluence page. No Oracle HTTP Server is required. Drop Oracle HTP Macro on page, select a DAD, specify render method, call parameters (if any), and a PLSQL block to be invoked. Save the page and you will get whatever HTML (JSON, binary data, etc) is generated by your Oracle database.</p>
    <div class="section section-1" id="src-44696017_OracleHTPPluginforAtlassianConfluence-Setup">
        <h1 class="heading "><span>Setup</span></h1>
<p   
>Before using Oracle HTP Macro to call Oracle stored procedures you will have to setup your database connection cache and data access descriptors.</p>
    <div class="section section-2" id="src-44696017_OracleHTPPluginforAtlassianConfluence-Connectioncache">
        <h2 class="heading "><span>Connection cache</span></h2>
<p   
>Before using the plugin with your Confluence you have to provide an Oracle JDBC driver and create one or more Data Access Descriptors. You can download the driver from Oracle: <a  class="external-link" href="http://www.oracle.com/technetwork/database/features/jdbc/index-091264.html">Oracle JDBC Download Page</a>. This plugin was mainly tested with <a  class="external-link" href="http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-112010-090769.html">ojdbc6.jar</a>, but also proved to work with earlier version <a  class="external-link" href="http://download.oracle.com/otn/utilities_drivers/jdbc/10205/ojdbc14.jar">ojdbc14.jar</a>. You will have to put the driver to your Confluence machine and make sure it is accessible by Confluence. If you fail to setup ojdbc path correctly, than you will receive an error: Connection failed: Failed to load Oracle JDBC driver.</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696017/image-20200818-191732.png" alt="images/wiki/download/attachments/44696017/image-20200818-191732.png"   />
    <p   
>The plugin uses database connection caching to share connections between database calls.</p>
<ul class=" "><li class=" "><p   
><strong class=" ">Cache Size</strong> specifies the maximum number of physical database connections supported by plugin</p>
</li><li class=" "><p   
><strong class=" ">Connect Timeout</strong> specifies the amount of time (in seconds) that the plugin will wait to establish a database connection before timeout</p>
</li><li class=" "><p   
><strong class=" ">Inactivity Timeout</strong> specifies the amount of time (in seconds) that an idle connection remains in cache before it is forcibly closed by plugin</p>
</li></ul>    </div>
    <div class="section section-2" id="src-44696017_OracleHTPPluginforAtlassianConfluence-DataAccessDescriptor">
        <h2 class="heading "><span>Data Access Descriptor</span></h2>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696017/image-20200818-191749.png" alt="images/wiki/download/attachments/44696017/image-20200818-191749.png"   />
    <p   
>To get a database connection you have to create a Data Access Descriptor (DAD). <strong class=" ">Host</strong>, <strong class=" ">Port</strong>, <strong class=" ">Service</strong>, <strong class=" ">Username</strong> and <strong class=" ">Password</strong> fields have the same meaning as they would have with standard JDBC connection.</p>
<ul class=" "><li class=" "><p   
><strong class=" ">Name</strong> is used to reference your DAD in Oracle HTP Macro settings (see below)</p>
</li><li class=" "><p   
><strong class=" ">Max Connections</strong> specifies maximum number of physical connections using this DAD</p>
</li></ul><p   
>You can test your DAD by clicking the Test button. If everything is set correctly you will get success message: <tt class=" ">Connection successfu</tt>l; if invalid host or port was specified, you will get an error: <tt class=" ">Connection failed: The Network Adapter could not establish the connection</tt>; if invalid username or password was specified, you will get: <tt class=" ">Connection failed: ORA-01017: invalid username/password; logon denied</tt>.</p>
    </div>
    </div>
    <div class="section section-1" id="src-44696017_OracleHTPPluginforAtlassianConfluence-OracleHTPMacro">
        <h1 class="heading "><span>Oracle HTP Macro</span></h1>
<p   
>The macro supports four different render methods described below:</p>
<ul class=" "><li class=" "><p   
>inline</p>
</li><li class=" "><p   
>lazy</p>
</li><li class=" "><p   
>rest</p>
</li><li class=" "><p   
>c3js</p>
</li></ul>    <div class="section section-2" id="src-44696017_OracleHTPPluginforAtlassianConfluence-InlineMethod">
        <h2 class="heading "><span>Inline Method</span></h2>
<p   
>This is by far the most simple method. Take a look at an example:</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696017/image-20200818-191814.png" alt="images/wiki/download/attachments/44696017/image-20200818-191814.png"   />
    <p   
>Save the page and you will get a paragraph: <tt class=" ">Hello, world!</tt> -- created for you by your Oracle database!</p>
<p   
>You specify PLSQL block to invoke in the body of your macro. With inline method the block is invoked in the process of rendering a Confluence page and the page will not get returned to your browser until the database call is complete. This method is acceptable for only brief calls that do not take much time to complete; for time-consuming calls lazy method is a better choice.</p>
    </div>
    <div class="section section-2" id="src-44696017_OracleHTPPluginforAtlassianConfluence-LazyMethod">
        <h2 class="heading "><span>Lazy Method</span></h2>
<p   
>With this method a Confluence page is returned before a database call is complete. If a call takes a long time, then a spinner will be displayed. Finally when an Oracle-generated HTML is fetched by the database, it will be rendered on your page.</p>
<p   
>Take a previous example, change method to <strong class=" ">lazy</strong> and save the page. You will get an error: <tt class=" ">Not authorized to run plsql block</tt>. To get over this error you should specify read or write restrictions to your Confluence page and refresh. Lazy, rest and c3js methods require access restrictions to be applied to a page, contrary to inline calls that do not care about access restrictions.</p>
    </div>
    <div class="section section-2" id="src-44696017_OracleHTPPluginforAtlassianConfluence-RESTMethod">
        <h2 class="heading "><span>REST Method</span></h2>
<p   
>Rather than invoking a stored procedure, this method publishes it as a RESTful service, and thus makes it available to other Confluence components. Take an example above and change method to <strong class=" ">rest</strong> and stored procedure to something returning a valid JSON:</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696017/image-20200818-191829.png" alt="images/wiki/download/attachments/44696017/image-20200818-191829.png"   />
    <p   
>Save the page and you will get something like this:</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696017/image-20200818-191838.png" alt="images/wiki/download/attachments/44696017/image-20200818-191838.png"   />
    <p   
>You can access your data with the endpoint specified. To test you can click the Test Page link. In the test form, put your name in <strong class=" ">Parameter value 1</strong> field and submit. You should find your name in a message returned by the database:</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696017/image-20200818-191851.png" alt="images/wiki/download/attachments/44696017/image-20200818-191851.png"   />
    <p   
>C3JS Method</p>
<p   
>This method is used to generate charts. It uses C3JS library (<a  class="external-link" href="http://c3js.org/">http://c3js.org</a>) to create SVG charts from JSON data returned by Oracle stored procedure. Please refer to to C3JS <a  class="external-link" href="http://c3js.org/examples.html">examples</a> and <a  class="external-link" href="http://c3js.org/reference.html">API reference</a> for details.</p>
<p   
>In many cases PLSQL code auto-generation will help you to create charts from your SQL statements, as described below. You can also take a look at a screencast at <a  class="external-link" href="https://youtu.be/k-TGu9P2fUo">https://youtu.be/k-TGu9P2fUo</a> for a number of chart examples.</p>
    <div class="section section-3" id="src-44696017_OracleHTPPluginforAtlassianConfluence-DateValuesfromPLSQL">
        <h3 class="heading "><span>Date Values from PLSQL</span></h3>
<p   
>C3JS accepts data in JSON format, which means text and numbers for scalar values. To pass a date you need to use &quot;DD-MM-YYYY HH24:MI:SS&quot; as a date format, for example</p>
    <div  class="tablewrap">
        <table class="confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">select to_char(sysdate,</code><code class="string">'DD-MM-YYYY HH24:MI:SS'</code><code class="plain">) from dual;</code></div>
</div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
>The plugin will automatically convert the value to a Date object.</p>
    </div>
    <div class="section section-3" id="src-44696017_OracleHTPPluginforAtlassianConfluence-ValueFormattingonCharts">
        <h3 class="heading "><span>Value Formatting on Charts</span></h3>
<p   
>C3JS library provides for value formatting for axis ticks. For example:</p>
    <div  class="tablewrap">
        <table class="confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="string">"axis"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">  </code><code class="string">"x"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    </code><code class="string">"label"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">      </code><code class="string">"text"</code><code class="plain">: </code><code class="string">"Time"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">      </code><code class="string">"position"</code><code class="plain">: </code><code class="string">"outer-bottom"</code></div>
<div class="line"><code class="plain">    },</code></div>
<div class="line"><code class="plain">    </code><code class="string">"type"</code><code class="plain">: </code><code class="string">"timeseries"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"localtime"</code><code class="plain">: </code><code class="keyword">true</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    </code><code class="string">"tick"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">      </code><code class="string">"format"</code><code class="plain">: </code><code class="string">"%d-%m %H:%M"</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">  },</code></div>
</div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
    <div  class="tablewrap">
        <table class="confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="string">"y"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">  </code><code class="string">"label"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    </code><code class="string">"text"</code><code class="plain">: </code><code class="string">"Amount REDO, Megabytes"</code></div>
<div class="line"><code class="plain">  },</code></div>
<div class="line"><code class="plain">  </code><code class="string">"tick"</code><code class="plain">: {</code></div>
<div class="line"><code class="plain">    </code><code class="string">"format"</code><code class="plain">: </code><code class="string">"^,.0"</code></div>
<div class="line"><code class="plain">  }</code></div>
<div class="line"><code class="plain">} </code></div>
</div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
>If <i class=" ">format</i> attribute value is prepended by &quot;^&quot; sign it will be automatically converted to a D3 format object. See the quote from the macro source code:</p>
    <div  class="tablewrap">
        <table class="confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="keyword">if</code><code class="plain"> (data.axis &amp;&amp; data.axis.x &amp;&amp; data.axis.x.tick &amp;&amp; data.axis.x.tick.format) {</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">if</code><code class="plain"> (data.axis.x.tick.format.startsWith(</code><code class="string">'^'</code><code class="plain">)) {</code></div>
<div class="line"><code class="plain">        data.axis.x.tick.format = d3.format(data.axis.x.tick.format.substring(</code><code class="value">1</code><code class="plain">));</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="keyword">if</code><code class="plain"> (data.axis &amp;&amp; data.axis.y &amp;&amp; data.axis.y.tick &amp;&amp; data.axis.y.tick.format) {</code></div>
<div class="line"><code class="plain">    </code><code class="keyword">if</code><code class="plain"> (data.axis.y.tick.format.startsWith(</code><code class="string">'^'</code><code class="plain">)) {</code></div>
<div class="line"><code class="plain">        data.axis.y.tick.format = d3.format(data.axis.y.tick.format.substring(</code><code class="value">1</code><code class="plain">));</code></div>
<div class="line"><code class="plain">    }</code></div>
<div class="line"><code class="plain">}</code></div>
</div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
>Please refer to C3JS samples and reference pages for when to use D3.format object and when to use plain text format.</p>
    </div>
    </div>
    </div>
    <div class="section section-1" id="src-44696017_OracleHTPPluginforAtlassianConfluence-UsageTips">
        <h1 class="heading "><span>Usage Tips</span></h1>
    <div class="section section-2" id="src-44696017_OracleHTPPluginforAtlassianConfluence-CodeAuto-Generation">
        <h2 class="heading "><span>Code Auto-Generation</span></h2>
<p   
>You can use PLSQL block auto-generation for your SQL SELECT... statements. To use this feature you need to put your select statement into a macro body and press &quot;Edit&quot; button to open the Macro Editor dialog.</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696017/image-20200818-191912.png" alt="images/wiki/download/attachments/44696017/image-20200818-191912.png"   />
    <p   
>You can generate the PLSQL blocks of the following types:</p>
<ul class=" "><li class=" "><p   
>Confluence table</p>
</li><li class=" "><p   
>JSON</p>
</li><li class=" "><p   
>Bar chart</p>
</li><li class=" "><p   
>Line chart</p>
</li><li class=" "><p   
>Pie chart</p>
</li><li class=" "><p   
>Horizontal stacked chart</p>
</li></ul><p   
>Adjust the auto-generated code to best fit your requirements.</p>
    </div>
    <div class="section section-2" id="src-44696017_OracleHTPPluginforAtlassianConfluence-ParameterPassing">
        <h2 class="heading "><span>Parameter Passing</span></h2>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>This section does not apply to inline or rest macros.</p>
        </div>
    </div>
<p   
>It is possible to pass up to ten parameters to your PLSQL block. To reference a parameter in PLSQL you will use a parameter placeholder, for example:</p>
    <div  class="tablewrap">
        <table class="confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">declare</code></div>
<div class="line"><code class="plain">  v_tablespace varchar2(</code><code class="value">30</code><code class="plain">) := :tablespace;</code></div>
<div class="line"><code class="plain">begin</code></div>
<div class="line"><code class="plain">  ...</code></div>
</div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
>Note the <i class=" ">:tablespace</i> &ndash; this is a parameter placeholder. The parameters are positional, so they get assigned in the order they appear in your PLSQL:</p>
    <div  class="tablewrap">
        <table class="confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">declare</code></div>
<div class="line"><code class="plain">  v_owner varchar2(</code><code class="value">30</code><code class="plain">) := :owner;</code></div>
<div class="line"><code class="plain">begin</code></div>
<div class="line"><code class="plain">  select count(bytes) from dba_segments where object_name := :name and owner = v_owner;</code></div>
<div class="line"><code class="plain">  ...</code></div>
</div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
>In the example above <i class=" ">:owner</i> will take value from parameter 1, <i class=" ">:name</i> will take value from parameter 2.</p>
<p   
>You can pass URL parameters to your PLSQL block. To do so use a {url-param-name} as a parameter value, for example, suppose your Confluence page with id 1212602 contains a PLSQL block:</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696017/image-20200818-191951.png" alt="images/wiki/download/attachments/44696017/image-20200818-191951.png"   />
    <p   
>When you navigate to /confluence/pages/viewpage.action?pageId=1212602 you will have &quot;Page id is: 1212602&quot; printed on your page.</p>
<p   
>You can use this feature to pass parameters from one PLSQL block to another. Suppose your C3JS pie chart has an &quot;onclick&quot; attribute defined (note that if the attribute value does not start with http:// or https:// it will be automatically prepended by your Confluence Base address):</p>
    <div  class="tablewrap">
        <table class="confluenceTable">
        <thead class=" "></thead><tfoot class=" "></tfoot><tbody class=" ">    <tr>
            <td  class="confluenceTd" rowspan="1" colspan="1">
        <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="string">"onclick"</code><code class="plain">: </code><code class="string">"/pages/viewpage.action?pageId=1212602"</code><code class="plain">,</code></div>
</div>
    </div>
            </td>
        </tr>
</tbody>        </table>
            </div>
<p   
>and a referenced page has a PLSQL block:</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696017/image-20200818-192004.png" alt="images/wiki/download/attachments/44696017/image-20200818-192004.png"   />
    <p   
>When you click a point on your pie chart you will be navigated to the target page with the information describing the chart point that was clicked. Use it for a drill-down query in your PLSQL block.</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696017/image-20200818-192014.png" alt="images/wiki/download/attachments/44696017/image-20200818-192014.png"   />
        </div>
    <div class="section section-2" id="src-44696017_OracleHTPPluginforAtlassianConfluence-DADSelectorMacro">
        <h2 class="heading "><span>DAD Selector Macro</span></h2>
    <div  class="confbox admonition admonition-info">
                            <span class="admonition-icon confluence-information-macro-icon"></span>
                <div class="admonition-body">
<p   
>This section does not apply to inline or rest macros.</p>
        </div>
    </div>
<p   
>DAD Selector is used to keep Oracle HTP macros on page in sync with each other, so that they use the same DAD even if their DAD macro parameters differ. When you select another DAD with a DAD Selector macro, all Oracle HTP macro tables and charts are refreshed. Please take a look as <a  class="external-link" href="https://youtu.be/k-TGu9P2fUo">https://youtu.be/k-TGu9P2fUo</a> for an example.</p>
    </div>
    <div class="section section-2" id="src-44696017_OracleHTPPluginforAtlassianConfluence-ConsumingRestMethod">
        <h2 class="heading "><span>Consuming Rest Method</span></h2>
<p   
>With rest method you can do lots of things. For example, you can use it with Confluence HTML macro and Google Charts (if not happy with C3JS):</p>
    <div  class="confbox programlisting" style="counter-reset: scroll-code-numbering 1">
                <div xmlns="http://www.w3.org/1999/xhtml" class="defaultnew syntaxhighlighter scroll-html-formatted-code" data-linenumbers="false" data-firstline="1">
<div class="line"><code class="plain">Sample script to draw a histogram...  Collapse source</code></div>
<div class="line"><code class="plain">&lt;div id=</code><code class="string">"html-dom-files"</code><code class="plain">&gt;&lt;/div&gt;</code></div>
<div class="line"><code class="plain">&lt;script type=</code><code class="string">"text/javascript"</code><code class="plain"> src=</code><code class="string">"https://www.gstatic.com/charts/loader.js"</code><code class="plain">&gt;&lt;/script&gt;</code></div>
<div class="line"><code class="plain">&lt;script type=</code><code class="string">"text/javascript"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">  google.charts.load(</code><code class="string">'current'</code><code class="plain">, {</code><code class="string">'packages'</code><code class="plain">:[</code><code class="string">'bar'</code><code class="plain">]});</code></div>
<div class="line"><code class="plain">&lt;/script&gt;</code></div>
<div class="line"><code class="plain">&lt;script type=</code><code class="string">"text/javascript"</code><code class="plain">&gt;</code></div>
<div class="line"><code class="plain">function plotChart1(e){</code></div>
<div class="line"><code class="plain">  $(</code><code class="string">"#html-dom-files"</code><code class="plain">).html(</code></div>
<div class="line"><code class="plain">    </code><code class="string">'&lt;p align="center"&gt;Getting data, please wait...&lt;/p&gt;'</code></div>
<div class="line"><code class="plain">  + </code><code class="string">'&lt;div align="center"&gt;&lt;img src="/images/icons/wait.gif"/&gt;&lt;/div&gt;'</code></div>
<div class="line"><code class="plain">  );</code></div>
<div class="line"><code class="plain"> </code></div>
<div class="line"><code class="plain"> $.ajax({</code></div>
<div class="line"><code class="plain">    url:      </code><code class="string">"/rest/oracle-htp-api/1.0/plsql"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    dataType: </code><code class="string">"json"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">    data:     {</code></div>
<div class="line"><code class="plain">                </code><code class="string">"pageId"</code><code class="plain">: </code><code class="value">753666</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            </code><code class="string">"macroId"</code><code class="plain">: </code><code class="string">"a43a0c9e-cf4d-4103-bd3c-3ece6ff350d8"</code><code class="plain">,</code></div>
<div class="line"><code class="plain">            </code><code class="string">"params"</code><code class="plain">: [ domainCode ]</code></div>
<div class="line"><code class="plain">              }</code></div>
<div class="line"><code class="plain">    })</code></div>
<div class="line"><code class="plain">    .done(function(jsonData){</code></div>
<div class="line"><code class="plain">      $(</code><code class="string">"#html-dom-files"</code><code class="plain">).html(</code><code class="string">""</code><code class="plain">);</code></div>
<div class="line"><code class="plain">      var data = </code><code class="keyword">new</code><code class="plain"> google.visualization.DataTable(jsonData);</code></div>
<div class="line"><code class="plain">      var options = {</code></div>
<div class="line"><code class="plain">        height: </code><code class="value">300</code><code class="plain">,</code></div>
<div class="line"><code class="plain">        chart: {</code></div>
<div class="line"><code class="plain">          title:    </code><code class="string">'Data files statistics'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          subtitle: </code><code class="string">'The number of reports, received during the last year'</code><code class="plain">,</code></div>
<div class="line"><code class="plain">          vAxis:    {</code></div>
<div class="line"><code class="plain">                      gridlines: { count: </code><code class="value">4</code><code class="plain"> }</code></div>
<div class="line"><code class="plain">                    }</code></div>
<div class="line"><code class="plain">        },</code></div>
<div class="line"><code class="plain">        bars: </code><code class="string">'vertical'</code></div>
<div class="line"><code class="plain">      };</code></div>
<div class="line"><code class="plain">      var chart = </code><code class="keyword">new</code><code class="plain"> google.charts.Bar(document.getElementById(</code><code class="string">'html-dom-files'</code><code class="plain">));</code></div>
<div class="line"><code class="plain">      </code><code class="comments">// Do something else, perhaps fetch another chart</code></div>
<div class="line"><code class="plain">      google.visualization.events.addListener(chart, </code><code class="string">'ready'</code><code class="plain">, onChartComplete);</code></div>
<div class="line"><code class="plain">      chart.draw(data, options);</code></div>
<div class="line"><code class="plain">    })</code></div>
<div class="line"><code class="plain">    .fail(function(){</code></div>
<div class="line"><code class="plain">      $(</code><code class="string">"#html-dom-files"</code><code class="plain">).html(</code><code class="string">"&lt;p&gt;Error!&lt;/p&gt;"</code><code class="plain">);</code></div>
<div class="line"><code class="plain">    });</code></div>
<div class="line"><code class="plain">}</code></div>
<div class="line"><code class="plain">&lt;/script&gt; </code></div>
</div>
    </div>
<p   
>In a real Confluence wiki I will get a chart like this one:</p>
<img  class="confluence-embedded-image image-center"                 style="display:block; margin-left: auto; margin-right: auto;"
     src="images/wiki/download/attachments/44696017/image-20200818-192146.png" alt="images/wiki/download/attachments/44696017/image-20200818-192146.png"   />
    <p   
>Hope you find it useful.</p>
<p   
>This addon is free under <a  class="external-link" href="https://github.com/mesilat/oracle-htp-plugin/blob/master/LICENSE">MIT license</a>. Source code for this addon is available at <a  class="external-link" href="https://github.com/mesilat/oracle-htp-plugin">GitHub</a>. To report a bug please use the <a  class="external-link" href="https://github.com/mesilat/oracle-htp-plugin/issues">Issue Tracker</a></p>
    </div>
    </div>
        </div>

    </article>


            <nav id="ht-post-nav">
                <a href="44696036.html" class="ht-post-nav-prev">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-prev" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-45.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Check HTTPS Certificate Plugin</span>
        </a>
                <a href="44696006.html" class="ht-post-nav-next">
            <svg width="22px" height="22px" viewBox="0 0 22 22" version="1.1" xmlns="http://www.w3.org/2000/svg"
                 xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
                <g id="ht-icon-next" sketch:type="MSArtboardGroup">
                    <path fill="#000000" d="M16,8 L16,6 L6,6 L6,16 L8,16 L8,8 L16,8 Z" id="Rectangle-2"
                          sketch:type="MSShapeGroup"
                          transform="translate(11.000000, 11.000000) rotate(-225.000000) translate(-11.000000, -11.000000) "></path>
                </g>
            </svg>
            <span>Restricted Content Plugin</span>
        </a>
    </nav>    
            
    <footer id="ht-footer">
    <a href="#" id="ht-jump-top" class="sp-aui-icon-small sp-aui-iconfont-arrows-up"></a>
</footer></div>

<div>
    <div id="ht-mq-detect"></div>
</div>

    <script src="js/lunr.js"></script>
    <script src="js/lunr-extras.js"></script>
    <script src="assets/js/scroll-search.js"></script>

    <script src="assets/js/expand-macro.js"></script>
</body>
</html>
